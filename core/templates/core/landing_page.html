{% extends 'base.html' %}
{% load static %}
{% load allauth socialaccount %}

{% block title %}StockSavvy: Your Smart Investment Navigator{% endblock %}

{% block content %}
    {% if user.is_authenticated %}
        <header class="hero-section" style="padding-bottom: 60px;">
            <h1>Welcome back, {{ user.username }}!</h1>
            <p>Ready to manage your investments or start a new calculation?</p>
            <div style="margin-top: 40px;">
                <a href="{% url 'calculators:calculators_index' %}" class="cta-button">Go to Calculators</a>
                <a href="{% url 'portfolio:portfolio_list' %}" class="cta-button" style="background-color: #3498db; margin-left: 15px;">View My Portfolio</a>
            </div>
        </header>
    {% else %}
        <header class="hero-section">
            <h1>Unlock Smarter Investment Decisions.</h1>
            <p>Calculate stock gains, manage your portfolio, and project future wealth with intuitive, powerful tools. Your first step is instantly free.</p>
            <a href="{% url 'calculators:stock_reprice_calculator' %}" class="cta-button">Try the Strategy Console (No Account Needed!)</a>
            <p style="font-size: 0.9em; margin-top: 15px;">See how it works instantly. No credit card, no commitment, just clarity.</p>
        </header>
    {% endif %}

    <section class="features-section">
        <h2>Tools Designed for Your Financial Growth.</h2>
        <div class="feature-cards">
            <div class="card">
                <h3>Repricing Strategy Console</h3>
                <p>See how buying more shares impacts your average cost, total investment, and profit potential. Plan your next move with precision.</p>
            </div>
            <div class="card">
                <h3>Capital Gains Clarity Dashboard</h3>
                <p>Navigate Taxes with Confidence.</p>
                <p>Estimate potential capital gains or losses and understand your tax implications for UK and US rules before you sell.</p>
            </div>
            <div class="card">
                <h3>Portfolio Rebalancing Console</h3>
                <p>Keep Your Strategy on Track.</p>
                <p>Define your target asset allocation and get a clear, actionable plan to buy or sell assets to maintain your desired risk level.</p>
            </div>
            <div class="card">
                <h3>Portfolio Dashboard</h3>
                <p>Track & Master Your Holdings.</p>
                <p>Manage your investments with a comprehensive dashboard, see real-time P&L with interactive charts, and gain insights into your overall portfolio health.</p>
            </div>
        </div>
    </section>

    {% if not user.is_authenticated %}
        <section class="signup-section">
            <h2>Unlock Your Full Investment Potential – It's Free.</h2>
            <ul>
                <li>✔ Save Your Progress: Keep a historical record of all your calculations and insights.</li>
                <li>✔ Personalized Portfolio: Track your actual stock holdings, their performance, and overall portfolio value.</li>
                <li>✔ Unlimited Access: Enjoy every calculator and feature without restriction, anytime you need them.</li>
                <li>✔ Access Anywhere: Your data is securely stored and available across all your devices.</li>
                <li>✔ Ready for More: Position yourself for future enhancements and advanced tracking features.</li>
            </ul>
            
            <a href="{% provider_login_url 'google' %}" class="cta-button">Sign Up with Google</a>
            <p class="mt-3">
                <a href="{% url 'account_signup' %}" style="color: white;">Or sign up with your email</a>
            </p>
            <p class="mt-4" style="font-size: 0.9em;">
                Already have an account? <a href="{% url 'account_login' %}" style="color: white; font-weight: bold;">Log In</a>
            </p>

        </section>
    {% endif %}

    <footer class="footer">
        <p>© 2025 StockSavvy. All rights reserved.</p>
    </footer>
{% endblock content %}